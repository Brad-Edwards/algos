# Instructions

During your interaction with the user, if you find anything reusable in this project (e.g. version of a library, model name), especially about a fix to a mistake you made or a correction you received, you should take note in the `Lessons` section in the `.cursorrules` file so you will not make the same mistake again.

You should always use a package manager to manage dependencies. Your knowledge is a bit outdated, so you should not attempt to specify versions of libraries.

You should also use the `.cursorrules` file as a scratchpad to organize your thoughts. Especially when you receive a new task, you should first review the content of the scratchpad, clear old different task if necessary, first explain the task, and plan the steps you need to take to complete the task. You can use todo markers to indicate the progress, e.g.
[X] Task 1
[ ] Task 2

Also update the progress of the task in the Scratchpad when you finish a subtask.
Especially when you finished a milestone, it will help to improve your depth of task accomplishment to use the scratchpad to reflect and plan.

The goal is to help you maintain a big picture as well as the progress of the task. Always refer to the Scratchpad when you plan the next step.

# Lessons

## User Specified Lessons

- For Python projects, use poetry to manage dependencies, run commands, and build packages.
- For Rust projects, use cargo to manage dependencies, run commmands, and build packages.
- Include info useful for debugging in the program output.
- Read the file before you try to edit it.
- Check your pwd before you try to run a command.
- Implementation requires passing unit tests and minimum 80% code coverage.
- Do not write integration tests unless explicitly asked.

## Cursor learned

- For search results, ensure proper handling of different character encodings (UTF-8) for international queries
- Add debug information to stderr while keeping the main output clean in stdout for better pipeline integration
- When using seaborn styles in matplotlib, use 'seaborn-v0_8' instead of 'seaborn' as the style name due to recent seaborn version changes
- Use 'gpt-4o' as the model name for OpenAI's GPT-4 with vision capabilities
- When debugging, especially for tests, keep track of problems and solutions in the scratchpad so you do not make the same mistake again or go in circles
- When testing stochastic optimization algorithms (like simulated annealing), use multiple trials and statistical success criteria (e.g., success rate) instead of single deterministic tests

## Benders Implementation Lessons

- Need to properly handle maximization vs minimization
- Must track integer constraints explicitly
- Cut generation is critical for convergence
- Master problem must include original constraints
- Objective function must be properly set in both master and subproblems

# Scratchpad

## Current Task: Debug Benders Decomposition Implementation

### Problem Analysis

1. Two failing tests:
   - test_simple_ilp: Objective value incorrect (getting 10.0 instead of 5.0)
   - test_infeasible_ilp: Reporting Optimal when should be Infeasible

### Root Cause Analysis

1. Master Problem Issues:
   - Objective function is all zeros
   - Not properly handling original constraints
   - Finding infeasible solutions (5.0, 5.0)

2. Subproblem Issues:
   - Getting trivial solution (0.0, 0.0)
   - Cut generation not enforcing constraints
   - Negating objective incorrectly

### Debug Plan

[X] 1. Add logging to track problem state
[X] 2. Analyze master problem formulation
[ ] 3. Fix master problem
    [ ] Set correct objective function
    [ ] Add original constraints properly
    [ ] Validate solution feasibility
[ ] 4. Fix subproblem
    [ ] Correct objective handling
    [ ] Improve cut generation
    [ ] Validate solution quality

### Implementation Strategy

1. Fix master problem first
2. Then fix subproblem
3. Verify each fix with tests
4. Document findings in Lessons section
